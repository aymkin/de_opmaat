# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with
code in this repository.

## Purpose

Dutch language learning materials repository (NT2 - Nederlands als Tweede Taal).
Contains two courses (De Opmaat A2, Link B1), vocabulary lists, tests, audio
files, Anki flashcard materials, daily study plans, and learning methodology
notes. The user's native language is Russian/Ukrainian.

## Commands

```bash
npm run format        # Format all markdown files with Prettier
npm run format:check  # Check formatting without changes
```

## Directory Structure

```
de_opmaat/          # De Opmaat course (A2) — thema_1/ through thema_7/ + transcriptions/
link/               # Link course (B1) — thema_1/ and onwards
daily/              # Daily practice and study planning
  templates/        #   Generic reusable templates (les, week review, monthly)
  maart_2026/       #   Monthly study plan with weekly/daily structure
    W{N}_{month}/   #     Week folders (W0_feb, W1_mrt, etc.)
      DD_MM/les.md  #       Daily lesson files with pre-filled resources
      week_review.md#       Weekly review template
    controle/       #     Baseline and monthly progress measurements
other/              # Learning methodology notes and analysis
  language_learning_methods/  # Evgeniy 6-step, Alisher immersion, comparisons
scripts/            # Automation utilities (audio_to_anki.py, etc.)
```

## Study Plan System (daily/maart_2026/)

The active study plan uses the **Evgeniy 6-step method** with a two-day cycle:

- **Evening (30 min):** Steps 1-3 on NEW material (cold watch, analyze, extract
  phrases)
- **Next day commute + lunch:** Steps 4-6 on YESTERDAY's material (shadowing,
  dictation, expressive repetition)

Weekly resource rotation: Mon=Heb je zin?, Tue=De Opmaat audio, Wed=Net in
Nederland, Thu=NOS Jeugdjournaal, Fri=Het Klokhuis/Easy Dutch + weekly review.

Progressive difficulty across weeks: W0-1 steps 1-3 only, W2 adds steps 4-5, W3
activates all 6, W4 full protocol + monthly test.

Roadmap overview: `daily/roadmap_maart_2026.md`

## Scripts

> **Detailed docs:** `scripts/README.md`

### audio_to_anki.py — Audio to Anki Sentence Cards

Splits audio dialogues into sentences and generates Anki cards with original
textbook audio. Dependencies:
`brew install ffmpeg && pip install openai-whisper`

```bash
python3 scripts/audio_to_anki.py de_opmaat/thema_7/2/h07_oefening_02.mp3 \
    --transcript de_opmaat/thema_7/2/h07_oefening_02.md \
    --theme gezondheid \
    --copy-to-anki
```

| Param            | Description             | Default    |
| ---------------- | ----------------------- | ---------- |
| `audio`          | Path to MP3 file        | (required) |
| `--transcript`   | MD file with transcript | -          |
| `--theme`        | Theme for Anki tags     | `general`  |
| `--level`        | CEFR level              | `A2`       |
| `--copy-to-anki` | Auto-copy to Anki media | off        |

Two modes: **Forced Alignment** (with `--transcript`, recommended — exact
boundaries + clean text) and **Whisper-only** (without transcript — quick
start).

## Anki Integration

**Profile:** `alex` — media at
`~/Library/Application Support/Anki2/alex/collection.media/`

### Anki File Formats

Files ending in `_anki.txt` use tab-separated format with header directives:

| Format                      | Header                                         | Fields                                                |
| --------------------------- | ---------------------------------------------- | ----------------------------------------------------- |
| Vocabulary with audio       | `#separator:tab` `#html:true` `#tags column:5` | Dutch \| Russian \| Notes \| Audio \| Tags            |
| Sentence-only               | `#separator:tab` `#html:false`                 | Dutch \| Russian                                      |
| Sentence cards with audio   | `#separator:tab` `#html:true` `#tags column:4` | Dutch \| Russian \| Audio \| Tags                     |
| Construction (multisensory) | `#separator:tab` `#html:true` `#tags column:6` | Russian \| Dutch \| Context \| Image \| Audio \| Tags |

**Tag structures:**

- Sentences: `sententiae::{theme}::{level}::audio`
- Constructions: `constructies::{category}::{level}` (categories: mening,
  vragen, oorzaak, tijd, contrast, dagelijks, fillers)

### Card Templates

Front: `{{Front}} {{Audio}}` — Back: `{{FrontSide}}<hr id="answer">{{Back}}`

Audio references: `[sound:filename.mp3]` (ElevenLabs, Amazon Polly, or
audio_to_anki.py output)

## File Naming Conventions

| Pattern                            | Purpose                   |
| ---------------------------------- | ------------------------- |
| `{N}_opdracht.md`                  | Numbered exercises        |
| `woordenlijst_pagina_{N}_anki.txt` | Vocabulary by page        |
| `grammatica_{topic}.md`            | Grammar explanations      |
| `taalhulp_{topic}_anki.txt`        | Topic-specific flashcards |
| `sententiae_{theme}_anki.txt`      | Sentence cards with audio |
| `constructies_{topic}_anki.txt`    | Construction cards        |
| `verhaal_{NN}_{title}.md`          | Story exercises           |

## Content Conventions

- Dutch nouns must include articles: `het stokbrood`, `de stroopwafel`
- Provide Russian translations; English as supplementary
- Exercise corrections: ✅ correct, ❌ incorrect, ~~strikethrough~~ for wrong
  parts
- Story files: **bolded verbs** for pattern recognition + grammar tables +
  vocabulary list (Dutch -> Russian -> English)
- Error tracking: Date stamp + tables (Error | Correction | Rule/Tip)

## Grammar Reference

Use tables for Dutch word order patterns:

| Conjunction | Word Order         | Example                            |
| ----------- | ------------------ | ---------------------------------- |
| **want**    | normal (S + V)     | Ik blijf thuis, want ik ben ziek.  |
| **omdat**   | verb to end        | Ik blijf thuis, omdat ik ziek ben. |
| **als**     | verb to end        | Als het regent, blijf ik thuis.    |
| (inversie)  | V + S after adverb | Morgen ga ik naar Amsterdam.       |

## Language Context

- Primary language: Dutch (Nederlands)
- User's native language: Russian/Ukrainian
- Course level: A2 (elementary), approaching B1
- Provide bilingual support when helpful (Dutch <-> Russian/English)
